{
  "agent": "ledger",
  "version": "0.0.1",
  "schema_version": "0.0.1",
  "autonomy_level": "supervised",
  "capabilities": {
    "read_cost_data": {
      "description": "Read cloud cost and usage data from all providers",
      "scope": "all",
      "gated": false,
      "evidence_required": ["timestamp"],
      "evidence_retention_days": 90
    },
    "analyze_spending_patterns": {
      "description": "Analyze cost trends and identify anomalies",
      "scope": "all",
      "gated": false,
      "evidence_required": ["timestamp", "context"],
      "evidence_retention_days": 90
    },
    "recommend_termination": {
      "description": "Recommend idle or wasteful resources for termination",
      "scope": "all",
      "gated": false,
      "evidence_required": ["timestamp", "context", "risk_assessment"],
      "evidence_retention_days": 90
    },
    "recommend_rightsizing": {
      "description": "Recommend resource capacity adjustments",
      "scope": "all",
      "gated": false,
      "evidence_required": ["timestamp", "context", "risk_assessment"],
      "evidence_retention_days": 90
    },
    "auto_terminate_dev_resource": {
      "description": "Automatically terminate tagged dev resources",
      "scope": "tagged_dev",
      "gated": true,
      "approval_from": ["warden"],
      "gate_type": "threshold_gate",
      "thresholds": {
        "max_cost_impact": 500,
        "max_resources_affected": 5,
        "required_confidence": 0.95
      },
      "evidence_required": ["timestamp", "context", "risk_assessment", "rollback_plan"],
      "evidence_retention_days": 365,
      "rollback_plan_required": true
    },
    "auto_terminate_staging_resource": {
      "description": "Automatically terminate tagged staging resources",
      "scope": "tagged_staging",
      "gated": true,
      "approval_from": ["reuben"],
      "gate_type": "human_gate",
      "evidence_required": ["timestamp", "context", "risk_assessment", "similar_actions", "rollback_plan"],
      "evidence_retention_days": 365,
      "rollback_plan_required": true
    },
    "modify_production": {
      "description": "Any modification to production resources",
      "scope": "none",
      "gated": true,
      "approval_from": ["reuben", "rpbx"],
      "gate_type": "consensus_gate",
      "evidence_required": ["timestamp", "context", "risk_assessment", "similar_actions", "rollback_plan"],
      "evidence_retention_days": 2555,
      "rollback_plan_required": true
    },
    "purchase_reserved_instances": {
      "description": "Purchase long-term capacity commitments",
      "scope": "none",
      "gated": true,
      "approval_from": ["reuben"],
      "gate_type": "human_gate",
      "thresholds": {
        "max_cost_impact": 10000
      },
      "evidence_required": ["timestamp", "context", "risk_assessment", "rollback_plan"],
      "evidence_retention_days": 2555,
      "rollback_plan_required": true
    },
    "generate_cost_report": {
      "description": "Create cost analysis reports for stakeholders",
      "scope": "all",
      "gated": false,
      "evidence_required": ["timestamp"],
      "evidence_retention_days": 90
    }
  },
  "metadata": {
    "created_at": "2026-02-06T02:00:00Z",
    "created_by": "rpbx",
    "last_updated": "2026-02-06T02:00:00Z",
    "last_updated_by": "rpbx",
    "approval_chain": ["reuben"],
    "review_date": "2026-03-06",
    "notes": "Ledger starts at supervised autonomy. Auto-terminate requires Warden threshold gate. Production changes require Reuben + RPBx consensus."
  },
  "constraints": {
    "max_blast_radius": "environment",
    "allowed_environments": ["dev", "staging"],
    "time_restrictions": {
      "allowed_days": ["mon", "tue", "wed", "thu", "fri"],
      "allowed_hours": { "start": "08:00", "end": "18:00" },
      "timezone": "America/New_York"
    },
    "rate_limits": {
      "actions_per_minute": 10,
      "actions_per_hour": 100,
      "concurrent_actions": 3
    }
  }
}
